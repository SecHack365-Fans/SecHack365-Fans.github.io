{"pageProps":{"postData":{"id":"sunset","contentHtml":"# sunset\n\n## 問題文\n\nTsukuCTF運営の1人であるshioが、今年に開催されたあるイベントが終わった後に夕日を撮影した。\\\nこの写真が撮影された日時を求めよ。\\\nフラグフォーマットは`TsukuCTF23{YYYY/MM/DD_hh:mm}`\\\n例えば、TsukuCTF2023の開始日時は`TsukuCTF23{2023/12/09_12:20}`\\\nなお、誤差は1分まで許容され、日本標準時を用いる。\n\nshio, one of the TsukuCTF admins, took a picture of the sunset after an event held this year.\\\nFind the date and time this photo was taken.\\\nThe flag format is `TsukuCTF23{YYYY/MM/DD_hh:mm}`\\\nFor example, the start date and time of TsukuCTF2023 is `TskuCTF23{2023/12/09_12:20}`\\\nNote that an error of up to 1 minute is allowed and the answer is based on Japan Standard Time.\n\n## 難易度\n\nhard\n\n## 解法\n\nまず、TsukuCTF運営の1人であるshioについてOSINTします。\\\nDiscordでアナウンスをしているshioのアカウントがあります。\\\nプロフィールにはX(Twitter)もリンクされています。\n\n次に、写真について調べます。\\\nGoogle Lensなどにより、新潟でさらに日和山展望台であることが分かります。\\\nこの2つの情報を合わせて、X(Twitter)で `from:@shio_sa1t 新潟` で調べます。\\\nすると、セキュリティ・ミニキャンプ in 新潟 2023に参加していることが分かります。\\\nイベントの終わりなので、 `2023/09/10` であることが分かります。\n\n最後に時間を求めていきます。ここが大変です。\\\n`https://hinode.pics/` で日の入り時刻が `18:02` であることが分かります。\\\nここで、日の入りの定義に注意してください。\n日の入りは、太陽が地平線に沈みきって見えなくなった瞬間のことです。\\\nそのため、この写真はそれよりも前に撮影されたことが分かります。\n\n時間差を求めていきます。\\\n太陽の右にある山の高さが画像でいうと18px(or 19px)です。\\\n国土地理院の情報によると、現実世界では東境山で標高は600mのようです。\\\nしかし、ここで地球が球体であることと大気の屈折率を考慮する必要があります。\\\n展望台から山の距離を求めます。\\\n擬似的に太陽の位置を山と山の間にして、Google Mapで計測すると、52km (or 51km)になります。\\\nまず、地球を完全な球体と仮定し、離れた距離での高さの差を求めます。\n次に、大気の屈折率による補正を行います。\\\nこれによって、山の見かけの高さが求められます。\\\n太陽の高さは、24pxくらいです。\\\nよって、先ほど求めた見かけの高さに24/18をかけます。\\\nここで、今求めた太陽の高さと先ほど計測した距離を用いて、太陽高度を求めることができます。\\\n具体的には、arctanを用います。\\\n`https://keisan.casio.jp/exec/system/1185781259`で太陽高度と時刻の関係を求めていきます。\\\nここで、17:45(2.52°)と18:00(-0.21°)に注目して、この区間を線形であると見なして計算していきます。\\\n具体的には solver.pyを参照してください。\n\nよって、`17:55.5881424412297` と求めることができるため、フラグは `TsukuCTF23{2023/09/10_17:55}`です。\\\n誤差を1分許容しているため、値が少し違っていても計算のプロセスさえ合ってれば求められるはずです。\n\n実際には、`17:56:05` に撮影されました。\\\nそのため、その他のフラグは `TsukuCTF23{2023/09/10_17:56}` と `TsukuCTF23{2023/09/10_17:57}` です。\\\n計算をしなくても、誤差1分を許容=3分の範囲を持つということを考慮すると、日の入り時間が分かれば提出回数制限内に答えられます。\n","title":"sunset","description":"夕日の撮影日時を求める","author":"shio_sa1t","genre":"osint","solver":14,"point":499}},"__N_SSG":true}